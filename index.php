<?php
/*PHP DIRECTORY LISTER by ProfCyberNaught - Copyright 2023
https://github.com/ProfCyberNaught/php-directory-lister-breadcrumbs-non-recursive/

CHOOSE YOUR DISPLAY SETTINGS: 'TRUE' or 'FALSE'*/
$display_page_title=TRUE;
$display_page_subtitle=TRUE;
$display_breadcrumbs=TRUE;
$display_icons=TRUE;
$display_favicon=FALSE;
$display_file_sizes=TRUE;
$display_last_modified_info=TRUE;
$display_link_hover_title_tags=TRUE;
$display_link_hover_bar=TRUE;
$display_back_to_top_link=TRUE;
$display_copyright_notice=TRUE;
$enable_darkmode_theme=FALSE;
/*CHANGE DARKMODE ACCENT COLOUR: You can change the darkmode colour from purple to anything you want. Just change the value below. Example colours: (Purple: #5647ae) (Blue: #0000ff) (Pink: #ff0b86) (Red: #6e0508) (Green: #008F11)*/
$darkmode_colour="#5647ae"; // (keep the '#' symbol)


/*DISPLAY CONTENT SETTINGS:*/
/*CHANGE TITLE(S) TEXT:*/
$page_title="PHP Directory Lister";
$page_subtitle="by ProfCyberNaught";

/*CHANGE COPYRIGHT DATA:*/
$copyright_display_name="ProfCyberNaught";
$copyright_url="https://github.com/ProfCyberNaught";
$copyright_link_title_tag="ProfCyberNaught on GitHub";
$copyright_year_start=""; //Optional start year
$copyright_year_end=""; // Leave blank for current year based on localhost

/*ADD A FAVICON LINK*/
$favicon_link="";

/*FILES EXCLUDE LIST (advanced):
i.e., files you do not want to show*/
$exclude=array('.','..','.DS_Store','.git','.gitmodules','.gitignore','node_modules');

/*CHANGE LINK BEHAVIOUR SETTINGS
i.e., open in same window (false) or new tab (true)*/
$open_links_new_tab=FALSE;

/*WARNING!!! DO NOT EDIT PAST THIS TEXT*/$directories=array();$files_list=array();function ext($file){if(!is_dir($file)){return str_replace('7z','sevenz',strtolower(pathinfo($file)['extension']));}}$path=dirname(__FILE__);$pieces=explode(DIRECTORY_SEPARATOR, $path);function human_filesize($file){$bytes=filesize($file);$decimals=1;$factor=floor((strlen($bytes)-1)/3);if($factor>0)$sz='KMGT';return sprintf("%.{$decimals}f",$bytes/pow(1024,$factor)).@$sz[$factor-1].'B';}$files=scandir('.');foreach($exclude as $ex){if(($key=array_search($ex,$files))!==false){unset($files[$key]);}}$lid="PCEtLVBIUCBESVJFQ1RPUlkgTElTVEVSIGJ5IFByb2ZDeWJlck5hdWdodCAtIENvcHlyaWdodCAyMDIzIGh0dHBzOi8vZ2l0aHViLmNvbS9Qcm9mQ3liZXJOYXVnaHQvcGhwLWRpcmVjdG9yeS1saXN0ZXItYnJlYWRjcnVtYnMtbm9uLXJlY3Vyc2l2ZS8tLT4=";print base64_decode($lid);?><html><head><?php if($display_favicon==TRUE&&$favicon_link!=""){print'<link rel="shortcut icon" type="image/x-icon" href="'.$favicon_link.'">';}?><title><?php print $pieces[count($pieces)-1];?></title><meta name="viewport"content="width=device-width"><?php $file_icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC4SURBVCjPdZFbDsIgEEWnrsMm7oGGfZrohxvU+Iq1TyjU60Bf1pac4Yc5YS4ZAtGWBMk/drQBOVwJlZrWYkLhsB8UV9K0BUrPGy9cWbng2CtEEUmLGppPjRwpbixUKHBiZRS0p+ZGhvs4irNEvWD8heHpbsyDXznPhYFOyTjJc13olIqzZCHBouE0FRMUjA+s1gTjaRgVFpqRwC8mfoXPPEVPS7LbRaJL2y7bOifRCTEli3U7BMWgLzKlW/CuebZPAAAAAElFTkSuQmCC";$dir_icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGrSURBVDjLxZO7ihRBFIa/6u0ZW7GHBUV0UQQTZzd3QdhMQxOfwMRXEANBMNQX0MzAzFAwEzHwARbNFDdwEd31Mj3X7a6uOr9BtzNjYjKBJ6nicP7v3KqcJFaxhBVtZUAK8OHlld2st7Xl3DJPVONP+zEUV4HqL5UDYHr5xvuQAjgl/Qs7TzvOOVAjxjlC+ePSwe6DfbVegLVuT4r14eTr6zvA8xSAoBLzx6pvj4l+DZIezuVkG9fY2H7YRQIMZIBwycmzH1/s3F8AapfIPNF3kQk7+kw9PWBy+IZOdg5Ug3mkAATy/t0usovzGeCUWTjCz0B+Sj0ekfdvkZ3abBv+U4GaCtJ1iEm6ANQJ6fEzrG/engcKw/wXQvEKxSEKQxRGKE7Izt+DSiwBJMUSm71rguMYhQKrBygOIRStf4TiFFRBvbRGKiQLWP29yRSHKBTtfdBmHs0BUpgvtgF4yRFR+NUKi0XZcYjCeCG2smkzLAHkbRBmP0/Uk26O5YnUActBp1GsAI+S5nRJJJal5K1aAMrq0d6Tm9uI6zjyf75dAe6tx/SsWeD//o2/Ab6IH3/h25pOAAAAAElFTkSuQmCC";if($enable_darkmode_theme==TRUE){?><style>:root{--dark-theme-color:<?php print$darkmode_colour;?>;}body{padding:0;margin:0;font-family:sans-serif;font-size:100%;line-height:100%;background: #121212;}#list a{color: var(--dark-theme-color);text-decoration:none;background-color:#121212;display:block;margin-bottom:5px;transition:400ms all ease-in-out;padding-left:15px;}<?php if($display_link_hover_bar==TRUE){?>#list a:hover{background-color:var(--dark-theme-color);color:#f0f0f0;}<?php }?>@media only screen and (min-width:850px){.container{border:0.5px solid var(--dark-theme-color);max-width:768px;margin:30px auto;}}h1{padding:20px 10px 10px;margin:0;font-size:1.4em;color:var(--dark-theme-color);}.header-title{font-size:1.4em;display:flex;justify-content:center;}.header-subtitle {font-size:1.0em;display:flex;justify-content:center;}.copyright-notice{color:#aaa;font-size:0.7em;display:flex;justify-content:center;}.copyright-notice a{text-decoration:none;color: #aaa;}.broughttoyouby{color:#aaa;font-size:0.5em;display:flex;justify-content:center;margin-top:-30px;}.broughttoyouby a{text-decoration:none;color:#aaa;}.breadcrumbs{color:#aaa;font-size:0.7em;display:flex;justify-content:left;padding-left:15px;}.breadcrumbs a{text-decoration:none;color:#aaa;}.top{font-size:0.7em;display:flex;justify-content:right;padding-right:15px;padding-bottom:15px;}.top a{text-decoration:none;color:var(--dark-theme-color);}.empty{color:#aaa;font-size:0.8em;display:flex;justify-content:left;padding-left:15px;}p{margin:0;padding:10px;color:#aaa;}ul{list-style:none;padding:10px 0 20px;margin:0;}ul li{padding:7px 20px 7px 30px;}<?php if($display_icons==TRUE){?>ul li.file{background:url("<?php print$file_icon;?>")left center no-repeat}ul li.dir{background:url("<?php print$dir_icon;?>")left center no-repeat}<?php }?>ul li span{color:#aaa;font-size:.75em;line-height:1em;}</style><?php }else{?><style>body{padding:0;margin:0;font-family:sans-serif;font-size:100%;line-height:100%;}#list a{color:#007b75;text-decoration:none;background-color:#fff;display:block;margin-bottom:5px;transition:400ms all ease-in-out;padding-left:15px;}<?php if($display_link_hover_bar==TRUE){?>#list a:hover{background-color:#eee;color:#001514;}<?php }?>@media only screen and (min-width:850px){.container{border:2px solid #ddd;box-shadow:0 0 25px #e5e5e5;max-width:768px;margin:30px auto;}}h1{padding:20px 10px 10px;margin:0;font-size:1.0em;border-bottom:2px solid #eee;color:#666;}.header-title{margin:0;font-size:1.4em;display:flex;justify-content:center;}.header-subtitle {margin:0;font-size:1.0em;display:flex;justify-content:center;}.copyright-notice{color:#999;font-size:0.7em;display:flex;justify-content:center;}.copyright-notice a{text-decoration:none;color:#999;}.broughttoyouby{color:#999;font-size:0.5em;display:flex;justify-content:center;margin-top:-20px;}.broughttoyouby a{text-decoration:none;color:#999;}.breadcrumbs{color:#999;font-size:0.7em;display:flex;justify-content:left;border-bottom:2px solid #eee;padding-left:15px;}.breadcrumbs a{text-decoration:none;color:#999;}.top{font-size:0.7em;display:flex;justify-content:right;border-bottom:2px solid #eee;padding-right:15px;padding-bottom:15px;}.top a{text-decoration:none;color:#999;}.empty{color:#999;font-size:0.8em;display:flex;justify-content:left;padding-left:15px;}p{margin:0;padding:10px;color:#999;}ul{list-style:none;padding:10px 0 20px;margin:0;}ul li{padding:7px 20px 7px 30px;}<?php if($display_icons==TRUE){?>ul li.file{background:url("<?php print$file_icon;?>")left center no-repeat}ul li.dir{background:url("<?php print$dir_icon;?>")left center no-repeat}<?php }?>ul li span{color:#aaa;font-size:.75em;line-height:1em;}</style><?php }print"</head>";print"<body>";$basewtitle="PGRpdiBjbGFzcz0iYnJvdWdodHRveW91YnkiPjxwPjxhIGhyZWY9Imh0dHBzOi8vZ2l0aHViLmNvbS9Qcm9mQ3liZXJOYXVnaHQvcGhwLWRpcmVjdG9yeS1saXN0ZXItYnJlYWRjcnVtYnMtbm9uLXJlY3Vyc2l2ZSJ0aXRsZT0iUEhQIERpcmVjdG9yeSBMaXN0ZXIgd2l0aCBCcmVhZGNydW1icyBieSBQcm9mQ3liZXJOYXVnaHQidGFyZ2V0PSJfYmxhbmsiPlBIUCBEaXJlY3RvcnkgTGlzdGVyPC9hPiBieSBQcm9mQ3liZXJOYXVnaHQ8L3A+PC9kaXY+";if($display_link_hover_title_tags==TRUE){$copyright_title_tag=$copyright_link_title_tag;}else{$copyright_title_tag="";}if($open_links_new_tab==TRUE){$target_links="target=\"_blank\"";}else{$target_links="";}if($copyright_year_start!=""){$copyright_year_start=$copyright_year_start." - ";}if($copyright_year_end==""){$copyright_year_end=date("Y");}$page_copyright="Copyright &copy; ".$copyright_year_start.$copyright_year_end." <a href=\"".$copyright_url."\"".$target_links."title=\"".$copyright_title_tag."\">".$copyright_display_name."</a>";$basewotitle="PGRpdiBjbGFzcz0iYnJvdWdodHRveW91YnkiPjxwPjxhIGhyZWY9Imh0dHBzOi8vZ2l0aHViLmNvbS9Qcm9mQ3liZXJOYXVnaHQvcGhwLWRpcmVjdG9yeS1saXN0ZXItYnJlYWRjcnVtYnMtbm9uLXJlY3Vyc2l2ZSJ0aXRsZT0iInRhcmdldD0iX2JsYW5rIj5QSFAgRGlyZWN0b3J5IExpc3RlcjwvYT4gYnkgUHJvZkN5YmVyTmF1Z2h0PC9wPjwvZGl2Pg==";if($display_link_hover_title_tags==TRUE){$base=base64_decode($basewtitle);}else{$base=base64_decode($basewotitle);}if($display_back_to_top_link==TRUE){print"<a name=\"top\"></a>";}if($display_page_title==TRUE){print"<div class=\"header-title\">";print "<h1>".$page_title."</h1>";print"</div>";}if($display_page_title==TRUE&&$display_page_subtitle==TRUE){print"<div class=\"header-subtitle\">";print"<p>".$page_subtitle."</p>";print"</div>";}print"<div class=\"container\">";print"<h1>".$pieces[count($pieces)-1]."</h1>";if($display_breadcrumbs==TRUE){print"<div class=\"breadcrumbs\">";function breadcrumbs($home='Home'){global $display_link_hover_title_tags;global $target_links;$root_domain=($_SERVER['HTTPS']?'https':'http').'://'.$_SERVER['HTTP_HOST'].'/';$breadcrumbs=array_filter(explode('/',parse_url($_SERVER['REQUEST_URI'],PHP_URL_PATH)));$crumbs_count=count($breadcrumbs);if($display_link_hover_title_tags==TRUE){$home_title_tag=$home;}else{$home_title_tag="";}$breadcrumb.='<a href="'.$root_domain.'" title="'.$home_title_tag.'"'.$target_links.'>'.$home.'</a>';$loop_counter=1;foreach($breadcrumbs as $crumb){if($loop_counter<$crumbs_count){$link=strtolower($crumb);$root_domain.=$crumb.'/';if($display_link_hover_title_tags==TRUE){$root_domain_title_tag=$link;}else{$root_domain_title_tag="";}$breadcrumb.='&nbsp; > &nbsp;<a href="'.$root_domain.'" title="'.$root_domain_title_tag.'"'.$target_links.'>'.$link.'</a>';$loop_counter++;}elseif($loop_counter==$crumbs_count){$link=strtolower($crumb);$root_domain.=$crumb.'/';$breadcrumb.='&nbsp; > &nbsp;'.$link;}}return $breadcrumb;}print breadcrumbs();print"</div>";}if(!empty($files)){print"<ul>";foreach($files as $file){if(is_dir($file)){$directories[]=$file;}else{$files_list[]=$file;}}print"<div id=\"list\">";foreach($directories as $directory){if($display_icons==TRUE){$directory_icon=' class="dir"';}else{$directory_icon="";}if($display_link_hover_title_tags==TRUE){$link_hover_tags="Directory: ".$directory;}else{$link_hover_tags="";}print'<a href="./'.$directory.'"'.$target_links.'title="'.$link_hover_tags.'"><li'.$directory_icon.'>'.$directory.'</li></a>';}foreach($files_list as $file_list){if($display_icons==TRUE){$files_icon=' class="file"';}else{$files_icon="";}if($display_last_modified_info==TRUE){$modified_date='<span> - (modified: '.date("d F Y H:i:s",filemtime($file_list)).')</span>';}else{$modified_date="";}if($display_file_sizes==TRUE){$file_size=' <span>'.human_filesize($file_list).'</span>';}else{$file_size="";}if($display_link_hover_title_tags==TRUE){$link_hover_tags="File: ".$file_list;}else{$link_hover_tags="";}print'<a href="./'.$file_list.'"'.$target_links.'title="'.$link_hover_tags.'"><li'.$files_icon.'>'.$file_list.$file_size.$modified_date.'</li></a>';}print"</div>";print"</ul>";}else{print"<div class=\"empty\">";print"<p>This directory contains no files or folders.</p>";print"</div>";}if($display_back_to_top_link==TRUE){print"<div class=\"top\">";if($display_link_hover_title_tags==TRUE){$back_top_title_tag="back to top";}else{$back_top_title_tag="";}print"<a href=\"#top\"title=\"".$back_top_title_tag."\">&#916;</a>";print"</div>";}if($display_copyright_notice==TRUE){print"<div class=\"copyright-notice\">";print"<p>".$page_copyright."</p>";print"</div>";}print"</div>".$base;?></body></html>